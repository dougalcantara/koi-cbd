(window["webpackJsonplocation-finder-embed"]=window["webpackJsonplocation-finder-embed"]||[]).push([[0],{201:function(e,t,o){e.exports=o(411)},410:function(e,t,o){},411:function(e,t,o){"use strict";o.r(t);o(202),o(211);var n=o(0),r=o.n(n),a=o(193),i=o.n(a),l=o(64),c=o(51),s=o(130),u=o(20),d=o.n(u),p=o(41),m=o(7),f=o(8),b=o(1);function g(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function h(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?g(o,!0).forEach((function(t){Object(b.a)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):g(o).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var y=window.__lfeConfig||{},v=function(e){return y[e]||{}},w=h({heading:"Locate a Koi CBD Distributor Near You",subheading:"Search below by city, state, zip to find the nearest distributor."},v("CONTENT_DEFAULTS")),x=h({viewPosition:{latitude:37.7577,longitude:-122.4376},zoom:11,maxZoom:18,minZoom:2,scrollZoom:!1},v("MAP_DEFAULTS")),E=h({locationColumn:"map_location",portalId:"5273025",tableId:"2594730",limit:15,absoluteLimit:100,showPhone:!0},v("RESULT_DEFAULTS")),k={1:"name",3:"map_location",4:"hours",6:"country",7:"email",8:"phone",9:"address_1",10:"address_2",11:"address_3",12:"address_4",13:"type",14:"city",15:"state",16:"zipcode",17:"website"},_="#f4b13e",C="#c0d8be",j="#d44646",O="#444444",I="#f5f5f5",N="#ffffff",S="#eeeeee",z="#a5a5a5",L="540px",P="992px",R=Object(f.c)(["0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}"]),M=Object(f.a)(["animation:"," 0.45s linear infinite"],R),F=f.b.div.withConfig({displayName:"Loader__LoaderEl",componentId:"sc-1avig13-0"})(["body #lfe-root &{position:absolute;z-index:599;top:0;left:0;width:100%;display:flex;align-items:center;justify-content:center;height:",";background-color:",";opacity:",";visibility:",";transition:all 0.25s ease;}"],(function(e){return e.height||"100%"}),(function(e){return e.background||N}),(function(e){return e.showing?"1":"0"}),(function(e){return e.showing?"visible":"hidden"})),T=f.b.span.withConfig({displayName:"Loader__Indicator",componentId:"sc-1avig13-1"})(["body #lfe-root &{display:block;width:1.75rem;height:1.75rem;overflow:hidden;text-indent:-499px;border-radius:50%;border-top:3px solid rgba(244,177,62,0.25);border-right:3px solid rgba(244,177,62,0.25);border-bottom:3px solid rgba(244,177,62,0.25);border-left:3px solid ",";",";}"],_,M),A=function(e){var t=e.loading,o=e.error,n=e.height,a=e.background;return r.a.createElement(F,{showing:t&&!o,height:n,background:a},r.a.createElement(T,null,"Loading..."))};A.defaultProps={height:"100%",background:N};var J=A,B=f.b.aside.withConfig({displayName:"ViewToggle__TabParent",componentId:"sc-1iq85dv-0"})(["body #lfe-root &{position:fixed;z-index:10001;bottom:0;left:0;width:100%;display:flex;background:",";box-shadow:rgba(44,44,44,0.1) 0 -2px 7px;}body #lfe-root & > span{display:block;position:absolute;width:2px;height:100%;top:0;left:50%;margin-left:-1px;background:",";}body #lfe-root & button{border:none;outline:none;font-size:0.9rem;display:block;flex-basis:50%;padding:1.5rem 0.5rem;text-align:center;font-weight:bold;text-transform:uppercase;cursor:pointer;}"],N,S),D=function(e){var t=e.onMapClick,o=e.onListClick;return r.a.createElement(B,null,r.a.createElement("span",null),r.a.createElement("button",{type:"button",onClick:o},r.a.createElement("span",null,"List View")),r.a.createElement("button",{type:"button",onClick:t},r.a.createElement("span",null,"Map View")))};D.defaultProps={onMapClick:function(){},onListClick:function(){}};var H=D,W=f.b.div.withConfig({displayName:"TextInput__InputWrapper",componentId:"sc-60vhw7-0"})(["body #lfe-root &{position:relative;margin-bottom:0.5rem;}@media (min-width:","){body #lfe-root &{flex-grow:2;margin-right:1rem;margin-bottom:0}}body #lfe-root & label{display:block;position:absolute;pointer-events:none;font-size:1.1rem;top:0.9rem;left:1.2rem;background:",";transform-origin:left top;color:",";transform:",";}"],L,N,z,(function(e){return e.hasValue?"translateY(-1.5rem) scale(0.7)":"none"})),V=f.b.input.withConfig({displayName:"TextInput__Input",componentId:"sc-60vhw7-1"})(["body #lfe-root &{outline:none;appearance:none;display:block;width:100%;font-size:1.1rem;padding:1rem;border-radius:6px;border:2px solid ",";transition:border-color 0.2s ease;}body #lfe-root &:hover{border-color:",";}body #lfe-root &:focus{border-color:",";box-shadow:"," 0 0 7px;}"],S,z,_,S),Y=function(e){var t=Object(n.useState)(!1),o=Object(m.a)(t,2),a=o[0],i=o[1];return r.a.createElement(W,{focus:a,hasValue:e.value.length>0},r.a.createElement("label",{htmlFor:e.id},e.label),r.a.createElement(V,{id:e.id,type:e.type,value:e.value,onChange:e.onChange,onFocus:function(){i(!0),e.onFocus&&e.onFocus()},onBlur:function(){i(!1),e.onBlur&&e.onBlur()}}))};Y.defaultProps={type:"text",label:"",id:""};var q=Y,Z=f.b.button.withConfig({displayName:"Button__ButtonEl",componentId:"sc-97qn02-0"})(["body #lfe-root &{border:none;appearance:none;cursor:pointer;display:inline-block;padding:1rem 2rem;line-height:1;font-size:0.9rem;text-transform:uppercase;font-weight:bold;border-radius:6px;background:",";color:",";}body #lfe-root &[disabled]{background:",";color:",";cursor:wait;}"],_,I,I,z),G=function(e){return r.a.createElement(Z,e,e.children)},X=f.b.div.withConfig({displayName:"SearchForm__FormWrapper",componentId:"qaba2v-0"})(["body #lfe-root &{position:relative;}body #lfe-root & > p{position:absolute;top:100%;left:0;width:100%;line-height:1;padding:0.5rem 0 0;font-size:0.85rem;color:",";}"],j),U=f.b.form.withConfig({displayName:"SearchForm__Form",componentId:"qaba2v-1"})(["body #lfe-root &{position:relative;display:flex;flex-direction:column;}@media (min-width:","){body #lfe-root &{flex-direction:row}}"],L),K=f.b.div.withConfig({displayName:"SearchForm__InputWrapper",componentId:"qaba2v-2"})(["body #lfe-root &{position:relative;}@media (min-width:","){body #lfe-root &{flex-grow:2}}body #lfe-root & > button{position:absolute;top:50%;right:1.5rem;transform:translateY(-50%);padding:0.6rem;border:none;background:none;color:",";cursor:pointer;outline:none;}body #lfe-root & > button .icon-compass{font-size:1.5rem;}body #lfe-root & > button:hover{color:",";}body #lfe-root & > button:hover > span{visibility:visible;opacity:1;transform:translateX(0);}body #lfe-root & > button > span{display:block;position:absolute;left:-6rem;top:0;width:7.5rem;padding:10px;border-radius:4px;background:",";color:",";margin-left:-1.5rem;margin-top:0.25rem;visibility:hidden;opacity:0;font-size:0.8rem;transform:translateX(10px);transition:all 0.2s ease;}"],L,z,_,O,I),Q=function(e){var t=e.loading,o=e.searchTerm,a=e.setSearchTerm,i=e.showGeolocate,l=e.onGeolocate,c=e.onSubmit,s=Object(n.useState)(!1),u=Object(m.a)(s,2),d=u[0],p=u[1],f=Object(n.useRef)(null),b=Object(n.useCallback)((function(e){e.preventDefault(),0!==o.length?f.current&&f.current===o?p("Enter a new search term"):(c(),f.current=o):p("Enter a location to search")}),[o]),g=Object(n.useCallback)((function(e){t||((o.length&&d||f.current&&f.current!==o&&d)&&p(!1),a(e.target.value))}),[o,d,t]);return r.a.createElement(X,null,r.a.createElement(U,{onSubmit:b},r.a.createElement(K,null,r.a.createElement(q,{label:"Search For a Store",onChange:g,value:o}),i&&r.a.createElement("button",{type:"button",onClick:l},r.a.createElement("div",{className:"icon-compass"}),r.a.createElement("span",null,"Use My Location"))),r.a.createElement(G,{type:"submit",disabled:t},"Search Now")),d&&r.a.createElement("p",null,d))},$=f.b.address.withConfig({displayName:"ResultItem__AddressHtml",componentId:"sc-1rw841m-0"})(["body #lfe-root &{font-style:normal;line-height:1.2;color:",";font-size:0.9rem;margin:0 0 0.5rem;}body #lfe-root & .lfe-street-addr span{display:inline-block;}body #lfe-root & .lfe-street-addr span:first-of-type{margin-right:5px;}"],z),ee=function(e){var t=e.result;return r.a.createElement($,null,r.a.createElement("div",{className:"lfe-street-addr"},r.a.createElement("span",null,t.address_1),t.address_2&&t.address_2.length>0&&r.a.createElement("span",null,t.address_2)),t.address_3&&t.address_3.length>0&&r.a.createElement("small",null,t.address_3),r.a.createElement("div",{className:"lfe-city-state"},r.a.createElement("span",null,t.city,", ",t.state," ",t.zipcode)))},te=f.b.div.withConfig({displayName:"ResultItem__ArrowElement",componentId:"sc-1rw841m-1"})(["body #lfe-root &{display:block;position:absolute;width:1rem;height:1rem;top:0;right:0;color:",";transform:",";opacity:",";transition:all 0.3s ease;}body #lfe-root & svg{display:block;position:absolute;top:0;left:0;width:100%;height:100%;}"],(function(e){return e.active?_:O}),(function(e){return e.active?"translateX(5px)":"translateX(-15px)"}),(function(e){return e.active?"1":"0"})),oe=function(e){var t=e.active;return r.a.createElement(te,{active:t},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},r.a.createElement("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),r.a.createElement("polyline",{points:"12 5 19 12 12 19"})))},ne=f.b.div.withConfig({displayName:"ResultItem__Phone",componentId:"sc-1rw841m-2"})(["body #lfe-root &{font-weight:bold;font-size:0.85rem;color:",";margin:-0.5rem 0 0.5rem;}"],_),re=f.b.div.withConfig({displayName:"ResultItem__HoursElement",componentId:"sc-1rw841m-3"})(["body #lfe-root &{}"]),ae=f.b.div.withConfig({displayName:"ResultItem__HoursDrawer",componentId:"sc-1rw841m-4"})(["body #lfe-root &{height:",";overflow:hidden;}body #lfe-root & ul{padding:0.5rem 0 0;margin:0;border:none;font-size:0.9rem;color:",";}body #lfe-root & ul li,body #lfe-root & ul li:last-child{border:none;}"],(function(e){return e.showing?"auto":"0px"}),z),ie=f.b.button.withConfig({displayName:"ResultItem__ShowHoursBtn",componentId:"sc-1rw841m-5"})(["body #lfe-root &{border:none;outline:none;appearance:none;padding:0;font-weight:bold;font-size:0.9rem;color:",";cursor:pointer;}"],_),le=function(e){var t=e.content,o=Object(n.useState)(!1),a=Object(m.a)(o,2),i=a[0],l=a[1];return r.a.createElement(re,null,r.a.createElement(ie,{type:"button",onClick:function(e){e.preventDefault(),l(!i)}},r.a.createElement("span",null,i?"Hide":"Show"," Hours")),r.a.createElement(ae,{showing:i},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:t}})))},ce=f.b.ul.withConfig({displayName:"SearchResults__ResultsList",componentId:"p7dwpd-0"})(["body #lfe-root &{list-style:none;margin:0;padding:0;}body #lfe-root & > li{position:relative;display:block;border-top:2px solid ",";}body #lfe-root & > li:last-child{border-bottom:2px solid ",";}body #lfe-root & > li a{color:",";transition:color 0.3s ease;}body #lfe-root & > li a:hover{color:"," !important;}"],S,S,O,z),se=f.b.div.withConfig({displayName:"SearchResults__ResultsItem",componentId:"p7dwpd-1"})(["body #lfe-root &{padding:2rem 1.5rem 1.5rem;padding-left:2.5rem;transform:",";transition:transform 0.35s ",",opacity 0.3s linear;}body #lfe-root & h3{font-size:1.1rem;margin:0 0 0.75rem;}body #lfe-root & h3 > span{display:inline-block;position:relative;padding-right:1.5rem;}"],(function(e){return e.active?"translateX(1rem)":"translateX(0)"}),"cubic-bezier(0.075, 0.82, 0.165, 1)"),ue=f.b.span.withConfig({displayName:"SearchResults__Number",componentId:"p7dwpd-2"})(["body #lfe-root &{display:block;position:absolute;z-index:1;top:1.5rem;left:0.5rem;padding-top:0.35rem;font-size:0.9rem;color:",";}"],C),de=Object(c.e)((function(e){var t=e.searchResults,o=e.activeIndex,a=e.setActiveIndex,i=e.match;Object(n.useEffect)((function(){if(i.params.index){var e=parseInt(i.params.index);e!==o&&e<E.limit&&a(e)}}),[i]);var c=Object(n.useCallback)((function(e){return"/search/".concat(i.params.latitude,"/").concat(i.params.longitude,"/").concat(e)}),[i.params]);return r.a.createElement(ce,null,t.map((function(e,t){return r.a.createElement("li",{key:e.id},r.a.createElement(ue,null,function(e){var t=e+1;return t>9?t:"0".concat(t)}(t)),r.a.createElement(se,{active:o===t},r.a.createElement(l.b,{to:c(t),title:"View Store on Map"},r.a.createElement("h3",null,r.a.createElement("span",null,e.name," ",r.a.createElement(oe,{active:o===t})))),E.showPhone&&r.a.createElement(ne,null,e.phone),r.a.createElement(ee,{result:e}),e.hours&&e.hours.length>10&&r.a.createElement(le,{content:e.hours})))})))})),pe=f.b.div.withConfig({displayName:"LoadMore__WrapperEl",componentId:"sc-1fmv5vc-0"})(["body #lfe-root &{position:relative;overflow:hidden;height:6rem;display:flex;align-items:center;justify-content:center;}body #lfe-root & button{display:inline-block;border:none;outline:none;appearance:none;padding:1rem 2rem;text-align:center;background:none;font-size:1rem;cursor:pointer;font-weight:bold;transition:color 0.3s ease,background 0.3s ease;}body #lfe-root & button:hover{background:",";color:",";}body #lfe-root & button:active{transform:translateY(1px);}"],I,_),me=f.b.div.withConfig({displayName:"LoadMore__LoadedAll",componentId:"sc-1fmv5vc-1"})(["body #lfe-root &{padding:2rem 1rem;text-align:center;font-weight:bold;font-size:0.9rem;color:",";}"],z),fe=function(e){var t=e.loading,o=e.onClick;return r.a.createElement(pe,null,r.a.createElement(J,{loading:t,error:!1}),r.a.createElement("button",{type:"button",onClick:o},r.a.createElement("span",null,"Load More")))};fe.defaultProps={loading:!1};var be=fe,ge=o(82),he=f.b.div.withConfig({displayName:"PopupHtml__Popup",componentId:"sc-1kc1348-0"})(["body #lfe-root &{padding:1.5rem;width:300px;}body #lfe-root & h3{margin:0 0 1rem;}"]),ye=f.b.div.withConfig({displayName:"PopupHtml__ActionRow",componentId:"sc-1kc1348-1"})(["body #lfe-root &{display:flex;justify-content:space-between;margin-top:1.5rem;}"]),ve=f.b.button.withConfig({displayName:"PopupHtml__Button",componentId:"sc-1kc1348-2"})(["body #lfe-root &{display:block;text-align:center;border-radius:4px;font-size:0.7rem;text-transform:uppercase;padding:1rem 1.5em;cursor:pointer;font-weight:bold;background:transparent;border:2px solid ",";color:",";transition:background 0.3s ease;}body #lfe-root &:hover{background:",";}"],S,z,S),we=function(e){var t=e.result;return r.a.createElement(he,{onClick:function(e){return e.stopPropagation()}},r.a.createElement("h3",null,t.name),r.a.createElement(ee,{result:t}),r.a.createElement(ye,null,r.a.createElement(ve,null,"Get Directions")))},xe=f.b.div.withConfig({displayName:"MapBox__ControlWrapper",componentId:"sc-1jtbemj-0"})(["body #lfe-root &{position:absolute;top:5px;right:",";left:",";}"],(function(e){return e.geo?"auto":"5px"}),(function(e){return e.geo?"5px":"auto"})),Ee=f.b.div.withConfig({displayName:"MapBox__MarkerHtml",componentId:"sc-1jtbemj-1"})(["body #lfe-root &{width:24px;height:24px;cursor:pointer;}body #lfe-root & > div{position:absolute;top:0;left:0;width:100%;height:100%;background:",";border-radius:50%;box-shadow:rgba(22,22,22,0.15) 0 0 0 8px;transition:opacity 0.2s ease;}body #lfe-root & > span{position:relative;z-index:99;display:block;line-height:2;color:",";font-weight:bold;font-size:0.75rem;text-align:center;}"],_,I),ke=function(e){var t=e.viewPosition,o=e.onViewPositionChange,a=e.zoom,i=e.onZoomChange,l=e.searchResults,c=e.activeIndex,s=e.onActiveIndexChange,u=Object(n.useRef)(null),d=Object(n.useRef)(0),p=Object(n.useRef)(null);return r.a.createElement(ge.d,{width:"100%",height:"100%",zoom:a,maxZoom:x.maxZoom,minZoom:x.minZoom,scrollZoom:x.scrollZoom,latitude:t.latitude,longitude:t.longitude,onViewportChange:function(e){console.log("Viewport change: ",e);var t=e.latitude,n=e.longitude,r=e.zoom;o({latitude:t,longitude:n}),i(r)},getCursor:function(e){u.current=e.isDragging},transitionDuration:d.current,transitionInterpolator:p.current,mapboxApiAccessToken:"pk.eyJ1IjoiY2xubWNncnciLCJhIjoiY2swdmhqY3g5MHM5MTNjbWlicmFxa3JkOCJ9.AM1RC2XW6CGtJhBdVEC_ag"},r.a.createElement(xe,null,r.a.createElement(ge.b,{showCompass:!1})),l.length>0&&l.map((function(e,t){return r.a.createElement(r.a.Fragment,{key:"marker-".concat(t)},r.a.createElement(ge.a,{latitude:e.map_location.lat,longitude:e.map_location.long,offsetLeft:-12,offsetTop:5},r.a.createElement(Ee,{active:c===t,onClick:function(){return s(t)}},r.a.createElement("div",null),r.a.createElement("span",null,t+1))),c===t&&r.a.createElement(ge.c,{latitude:e.map_location.lat,longitude:e.map_location.long,closeOnClick:!1,captureClick:!0,onClose:function(){return s(!1)}},r.a.createElement(we,{result:e})))})))};ke.defaultProps={markers:[],activeIndex:!1};var _e=ke,Ce=f.b.section.withConfig({displayName:"Layout__ListingSection",componentId:"sc-1fs3kl3-0"})(["body #lfe-root &{position:relative;min-height:100vh;padding-bottom:4rem;}@media (min-width:","){body #lfe-root &{width:50%;z-index:299;box-shadow:rgba(44,44,44,0.1) 2px 0 7px}}"],P),je=f.b.div.withConfig({displayName:"Layout__ContentLiner",componentId:"sc-1fs3kl3-1"})(["body #lfe-root &{position:relative;padding:5rem 1rem 2rem;min-height:",";}@media (min-width:","){body #lfe-root &{padding-left:2rem;padding-right:2rem}}"],(function(e){return e.results?"400px":"0"}),L),Oe=f.b.section.withConfig({displayName:"Layout__MapSection",componentId:"sc-1fs3kl3-2"})(["body #lfe-root &{position:fixed;top:0;left:-100%;background:",";width:100%;height:100%;}@media (min-width:","){body #lfe-root &{left:auto;right:0;width:50%}}"],O,P),Ie=f.b.div.withConfig({displayName:"Layout__Headings",componentId:"sc-1fs3kl3-3"})(["body #lfe-root &{padding:0 0 3rem;}body #lfe-root & h2{font-weight:bold;font-size:2.8rem;margin:0 0 1.2rem;}body #lfe-root & p{font-size:1.1rem;}"]),Ne=function(){return r.a.createElement(Ie,null,r.a.createElement("h2",null,w.heading),r.a.createElement("p",null,w.subheading))},Se=E.portalId,ze=E.tableId,Le=E.locationColumn,Pe=E.limit,Re=function(){var e=Object(p.a)(d.a.mark((function e(t){var o,n,r,a=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,fetch(t,o);case 3:if(!(n=e.sent).ok){e.next=9;break}return e.next=7,n.json();case 7:return r=e.sent,e.abrupt("return",r);case 9:throw new Error(n.status);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Me="https://api.hubapi.com/hubdb/api/v2/tables/".concat(ze,"/rows?portalId=").concat(Se),Fe=function(){var e=Object(p.a)(d.a.mark((function e(t,o){var n,r=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>2&&void 0!==r[2]?r[2]:0,e.abrupt("return",Re("".concat(Me,"&limit=").concat(Pe,"&offset=").concat(n,"&orderBy=geo_distance(").concat(Le,",").concat(t,",").concat(o,")")));case 2:case"end":return e.stop()}}),e)})));return function(t,o){return e.apply(this,arguments)}}(),Te="https://api.mapbox.com/geocoding/v5/mapbox.places",Ae=function(e){return Re((t=e,"".concat(Te,"/").concat(t,".json?access_token=").concat("pk.eyJ1IjoiY2xubWNncnciLCJhIjoiY2swdmhqY3g5MHM5MTNjbWlicmFxa3JkOCJ9.AM1RC2XW6CGtJhBdVEC_ag","&types=place,locality,postcode")));var t},Je=function(e,t){return Re(function(e,t){return"".concat(Te,"/").concat(t,",").concat(e,".json?access_token=").concat("pk.eyJ1IjoiY2xubWNncnciLCJhIjoiY2swdmhqY3g5MHM5MTNjbWlicmFxa3JkOCJ9.AM1RC2XW6CGtJhBdVEC_ag","&types=place,locality,postcode")}(e,t))},Be=function(e){return e.map((function(e){var t={id:e.id};return Object.keys(e.values).forEach((function(o){t[k[o]]=e.values[o]})),t}))},De=function(e){var t=e.filter((function(e){return e.place_type.includes("place")})),o=Object(m.a)(t,1)[0];return o?o.place_name.replace(", United States",""):""},He=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return Number(Math.round(e+"e"+t)+"e-"+t)},We=Object(c.e)((function(e){var t=e.history,o=e.match,a=(e.location,Object(n.useState)(!0)),i=Object(m.a)(a,2),l=i[0],c=i[1],u=Object(n.useState)(!1),f=Object(m.a)(u,2),b=f[0],g=f[1],h=Object(n.useState)(!0),y=Object(m.a)(h,2),v=y[0],w=y[1],k=Object(n.useState)(""),_=Object(m.a)(k,2),C=_[0],j=_[1],O=Object(n.useState)([]),I=Object(m.a)(O,2),N=I[0],z=I[1],L=Object(n.useState)(x.viewPosition),P=Object(m.a)(L,2),R=P[0],M=P[1],F=Object(n.useState)(!1),T=Object(m.a)(F,2),A=T[0],B=T[1],D=Object(n.useState)(x.zoom),W=Object(m.a)(D,2),V=W[0],Y=W[1],q=Object(n.useState)(!1),Z=Object(m.a)(q,2),G=Z[0],X=Z[1],U=Object(n.useRef)(1),K=Object(n.useRef)(null),$=function(){var e=Object(p.a)(d.a.mark((function e(t,o){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fe(t,o).then((function(e){console.log("Raw hubdb response: ",e);var t=Be(e.objects);console.log("Search results: ",t),z(t),K.current=Math.ceil(e.total/E.limit)})).catch((function(e){console.log("Request error: ",e),X("Problem getting results.")})).finally((function(){return c(!1)})));case 1:case"end":return e.stop()}}),e)})));return function(t,o){return e.apply(this,arguments)}}(),ee=function(){var e=Object(p.a)(d.a.mark((function e(t,o){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Je(t,o).then((function(e){var t=De(e.features);console.log(t),j(t)})).catch((function(e){console.log("Rev geocode err: ",e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,o){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){if(o.params.latitude&&o.params.longitude){var e=parseFloat(o.params.latitude),n=parseFloat(o.params.longitude);return M({latitude:e,longitude:n}),void Object(p.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$(e,n);case 2:return t.next=4,ee(e,n);case 4:case"end":return t.stop()}}),t)})))()}if(o.params.term&&o.params.term.length>1)return j(o.params.term),void te(o.params.term);navigator.geolocation.getCurrentPosition((function(e){var o=He(e.coords.latitude),n=He(e.coords.longitude);console.log("Got coords: ",{latitude:o,longitude:n}),M({latitude:o,longitude:n}),t.push("/search/".concat(o,"/").concat(n)),Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$(o,n);case 2:return e.next=4,ee(o,n);case 4:case"end":return e.stop()}}),e)})))()}),(function(){c(!1),w(!1)}))}),[]),Object(n.useEffect)((function(){if(N.length&&!1!==A){var e=N[A].map_location,t=e.lat,o=e.long;M({latitude:t,longitude:o})}}),[A]);var te=Object(n.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];c(!0),e||(z([]),B(!1)),Ae(e||C).then((function(e){console.log("Forward geocode: ",e);var o=e.features[0];if(o){var n=o.geometry.coordinates[1],r=o.geometry.coordinates[0];M({latitude:n,longitude:r}),t.push("/search/".concat(n,"/").concat(r)),Fe(n,r).then((function(e){console.log("Raw hubdb response: ",e);var t=Be(e.objects);console.log("Search results: ",t),z(t)})).catch((function(e){console.log("Request error: ",e),X("Problem getting results.")})).finally((function(){return c(!1)}))}else c(!1),X("Can't find location for ".concat(C))})).catch((function(e){c(!1),X("Can't find location for ".concat(C)),console.log("Forward geocode err: ",e)}))}),[C,t]),oe=Object(n.useCallback)((function(e){c(!0),navigator.geolocation.getCurrentPosition((function(e){var o=He(e.coords.latitude),n=He(e.coords.longitude);console.log("Got coords: ",{latitude:o,longitude:n}),M({latitude:o,longitude:n}),t.push("/search/".concat(o,"/").concat(n)),Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$(o,n);case 2:return e.next=4,ee(o,n);case 4:case"end":return e.stop()}}),e)})))()}),(function(){c(!1)}))})),ne=Object(n.useCallback)((function(e){e.preventDefault(),g(!0);var t=R.latitude,o=R.longitude,n=U.current*E.limit;Fe(t,o,n).then((function(e){console.log("Raw hubdb response: ",e);var t=Be(e.objects);console.log("Search results: ",t),U.current=U.current+1,z([].concat(Object(s.a)(N),Object(s.a)(t)))})).catch((function(e){console.log("Request error: ",e),X("Problem getting results.")})).finally((function(){return g(!1)}))}),[N]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ce,null,r.a.createElement(je,null,r.a.createElement(Ne,null),r.a.createElement(Q,{loading:l,setLoading:c,searchTerm:C,setSearchTerm:j,showGeolocate:v,onGeolocate:oe,onSubmit:te})),r.a.createElement(je,null,r.a.createElement(J,{loading:l,error:G,height:"320px"}),N.length>0&&r.a.createElement(de,{searchResults:N,activeIndex:A,setActiveIndex:B}),U.current<K.current&&r.a.createElement(be,{loading:b,onClick:ne}),U.current===K.current&&r.a.createElement(me,null,"Showing All Locations"))),r.a.createElement(Oe,null,r.a.createElement(J,{loading:l,error:G,background:S}),r.a.createElement(_e,{zoom:V,searchResults:N,onZoomChange:function(e){return Y(e)},viewPosition:R,onViewPositionChange:function(e){return M(e)},activeIndex:A,onActiveIndexChange:function(e){return B(e)}})),r.a.createElement(H,null))})),Ve=function(){return r.a.createElement(c.a,{exact:!0,path:["/","/search/:term","/search/:latitude/:longitude","/search/:latitude/:longitude/:index"],component:We})};o(410);i.a.render(r.a.createElement(l.a,null,r.a.createElement(Ve,null)),document.getElementById("lfe-root"))}},[[201,1,2]]]);
//# sourceMappingURL=main.9b12bbff.chunk.js.map